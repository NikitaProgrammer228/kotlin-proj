# –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ: –ö–∞–∫ –º—ã –ø–æ–ª—É—á–∏–ª–∏ 50 –ì—Ü –≤–º–µ—Å—Ç–æ 10 –ì—Ü

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞](#–∏—Å—Ö–æ–¥–Ω–∞—è-–ø—Ä–æ–±–ª–µ–º–∞)
2. [–ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –Ω–∏–∑–∫–æ–π —á–∞—Å—Ç–æ—Ç—ã](#–∞–Ω–∞–ª–∏–∑-–ø—Ä–∏—á–∏–Ω-–Ω–∏–∑–∫–æ–π-—á–∞—Å—Ç–æ—Ç—ã)
3. [–†–µ—à–µ–Ω–∏–µ 1: –ü–µ—Ä–µ—Ö–æ–¥ —Å AAR –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥](#—Ä–µ—à–µ–Ω–∏–µ-1-–ø–µ—Ä–µ—Ö–æ–¥-—Å-aar-–Ω–∞-–∏—Å—Ö–æ–¥–Ω—ã–π-–∫–æ–¥)
4. [–†–µ—à–µ–Ω–∏–µ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ RSW (Return Content)](#—Ä–µ—à–µ–Ω–∏–µ-2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—Ä–µ–≥–∏—Å—Ç—Ä–∞-rsw)
5. [–†–µ—à–µ–Ω–∏–µ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ RRATE (Return Rate)](#—Ä–µ—à–µ–Ω–∏–µ-3-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—Ä–µ–≥–∏—Å—Ç—Ä–∞-rrate)
6. [–†–µ—à–µ–Ω–∏–µ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ requestConnectionPriority(HIGH)](#—Ä–µ—à–µ–Ω–∏–µ-4-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-requestconnectionpriorityhigh)
7. [–†–µ—à–µ–Ω–∏–µ 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏](#—Ä–µ—à–µ–Ω–∏–µ-5-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-–∑–∞–¥–µ—Ä–∂–µ–∫)
8. [–ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç](#–∏—Ç–æ–≥–æ–≤—ã–π-—Ä–µ–∑—É–ª—å—Ç–∞—Ç)

---

## üî¥ –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

### –ß—Ç–æ –±—ã–ª–æ:
- **–ß–∞—Å—Ç–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:** ~10 –ì—Ü (10 —Å—ç–º–ø–ª–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)
- **–ù–µ–º–µ—Ü–∫–∏–π MicroSwing:** 50 –ì—Ü (50 —Å—ç–º–ø–ª–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)
- **–†–∞–∑–Ω–∏—Ü–∞:** –í 5 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ!

### –°–∏–º–ø—Ç–æ–º—ã:
- –ì—Ä–∞—Ñ–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å –º–µ–¥–ª–µ–Ω–Ω–æ
- –î–≤–∏–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å "—Å—Ç—É–ø–µ–Ω—á–∞—Ç–æ"
- –ú–µ—Ç—Ä–∏–∫–∏ (Stability, Frequency, Coordination) –±—ã–ª–∏ –Ω–µ—Ç–æ—á–Ω—ã–º–∏
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏: `üìä Sample rate: 10 samples/sec`

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- **50 –ì—Ü** (–∫–∞–∫ —É –Ω–µ–º–µ—Ü–∫–æ–≥–æ MicroSwing)
- –ü–ª–∞–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
- –¢–æ—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –Ω–∏–∑–∫–æ–π —á–∞—Å—Ç–æ—Ç—ã

### –ü—Ä–∏—á–∏–Ω–∞ 1: –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ BLE –∫–∞–Ω–∞–ª–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ–Ω—Å–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **–í–°–Å** (ACC + GYRO + ANGLE + MAG)
- –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞: ~25 –±–∞–π—Ç
- –ü—Ä–∏ 10 –ì—Ü: 250 –±–∞–π—Ç/—Å–µ–∫ (–µ—â—ë —Ç–µ—Ä–ø–∏–º–æ)
- –ü—Ä–∏ 50 –ì—Ü: 1250 –±–∞–π—Ç/—Å–µ–∫ (–∫–∞–Ω–∞–ª –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω)
- –ü—Ä–∏ 200 –ì—Ü: 5000 –±–∞–π—Ç/—Å–µ–∫ (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ)

**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å RSW = ACC_ONLY (—Ç–æ–ª—å–∫–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è, ~6 –±–∞–π—Ç/–ø–∞–∫–µ—Ç)

### –ü—Ä–∏—á–∏–Ω–∞ 2: –ù–∏–∑–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –†–µ–≥–∏—Å—Ç—Ä RRATE –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = 0x06 (10 –ì—Ü)
- SDK –Ω–µ –º–µ–Ω—è–µ—Ç —ç—Ç—É –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å RRATE = 0x08 (50 –ì—Ü)

### –ü—Ä–∏—á–∏–Ω–∞ 3: –í—ã—Å–æ–∫–∏–π BLE Connection Interval

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Android –∏—Å–ø–æ–ª—å–∑—É–µ—Ç connection interval ~100 –º—Å
- –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –¥–æ ~10 –ì—Ü
- –î–∞–∂–µ –ø—Ä–∏ RRATE=50Hz, –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–∑–≤–∞—Ç—å `requestConnectionPriority(HIGH)` –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è interval –¥–æ 15-20 –º—Å

### –ü—Ä–∏—á–∏–Ω–∞ 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AAR (–Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- SDK –ø–æ—Å—Ç–∞–≤–ª—è–ª—Å—è –∫–∞–∫ AAR (—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
- –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `requestConnectionPriority`
- –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ SDK –∫–∞–∫ –º–æ–¥—É–ª—å –ø—Ä–æ–µ–∫—Ç–∞

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –ü–µ—Ä–µ—Ö–æ–¥ —Å AAR –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

### –®–∞–≥ 1.1: –ù–∞–π—Ç–∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ SDK

**–ì–¥–µ:** `libs/Sample Codes/wit-opensdk-android/wit-sdk/`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
libs/Sample Codes/wit-opensdk-android/
‚îî‚îÄ‚îÄ wit-sdk/
    ‚îî‚îÄ‚îÄ src/main/java/com/wit/witsdk/
        ‚îî‚îÄ‚îÄ sensor/modular/connector/modular/bluetooth/
            ‚îú‚îÄ‚îÄ CustomBluetoothBLE.java
            ‚îú‚îÄ‚îÄ InukerBluetoothBLE.java
            ‚îî‚îÄ‚îÄ BluetoothBLE.java
```

### –®–∞–≥ 1.2: –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å –≤ `settings.gradle`

**–§–∞–π–ª:** `settings.gradle`

**–ë—ã–ª–æ:**
```gradle
include ':app'
include ':bluetoothkit'
project(':bluetoothkit').projectDir = file('third_party/bluetoothkit')
```

**–°—Ç–∞–ª–æ:**
```gradle
include ':app'
include ':bluetoothkit'
project(':bluetoothkit').projectDir = file('third_party/bluetoothkit')

// ‚ö° –î–æ–±–∞–≤–ª—è–µ–º wit-sdk –∫–∞–∫ –∏—Å—Ö–æ–¥–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è requestConnectionPriority
// –ò—Å–ø–æ–ª—å–∑—É–µ–º KSP –≤–º–µ—Å—Ç–æ KAPT –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å project dependencies
include ':wit-sdk'
project(':wit-sdk').projectDir = file('libs/Sample Codes/wit-opensdk-android/wit-sdk')
```

### –®–∞–≥ 1.3: –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ `app/build.gradle`

**–§–∞–π–ª:** `app/build.gradle`

**–ë—ã–ª–æ:**
```gradle
dependencies {
    // ...
    implementation(name: 'wit-sdk', ext: 'aar')  // ‚ùå AAR - –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å
}
```

**–°—Ç–∞–ª–æ:**
```gradle
dependencies {
    // ...
    // WitMotion BLE SDK - –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è requestConnectionPriority
    // KSP –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ª—É—á—à–µ —Å project dependencies, —á–µ–º KAPT
    implementation project(':wit-sdk')  // ‚úÖ –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ - –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å
    implementation project(':bluetoothkit')
}
```

### –®–∞–≥ 1.4: –ü–µ—Ä–µ—Ö–æ–¥ —Å KAPT –Ω–∞ KSP

**–ü—Ä–æ–±–ª–µ–º–∞:** KAPT –Ω–µ —Ä–∞–±–æ—Ç–∞–ª —Å project dependencies (–æ—à–∏–±–∫–∞ `Could not load module <Error module>`)

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ KSP (Kotlin Symbol Processing)

**–í `build.gradle` (root):**
```gradle
plugins {
    // ...
    id 'com.google.devtools.ksp' version '1.9.24-1.0.20' apply false
}
```

**–í `app/build.gradle`:**
```gradle
plugins {
    id 'com.android.application'
    id 'org.jetbrains.kotlin.android'
    id 'com.google.devtools.ksp'  // ‚úÖ KSP –≤–º–µ—Å—Ç–æ KAPT
}

dependencies {
    // ...
    ksp 'androidx.room:room-compiler:2.6.1'  // ‚úÖ KSP –≤–º–µ—Å—Ç–æ kapt
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ SDK!

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ RSW (Return Content)

### –ß—Ç–æ —Ç–∞–∫–æ–µ RSW?

**RSW (Return Content Register, 0x02)** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–ë–∏—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞:**
- `0x01` = RSW_TIME (–≤—Ä–µ–º—è)
- `0x02` = RSW_ACC (—É—Å–∫–æ—Ä–µ–Ω–∏—è) ‚úÖ
- `0x04` = RSW_GYRO (—É–≥–ª–æ–≤—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏)
- `0x08` = RSW_ANGLE (—É–≥–ª—ã)
- `0x10` = RSW_MAG (–º–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä)

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `0x1E` = 0x02 + 0x04 + 0x08 + 0x10 (–≤—Å—ë —Å—Ä–∞–∑—É!)

### –®–∞–≥ 2.1: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤

**–§–∞–π–ª:** `BluetoothAccelerometerService.kt`

**–ö–æ–¥:**
```kotlin
// === –®–ê–ì 1: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ ===
// FF AA 69 88 B5 - unlock command
Log.d(TAG, "‚Üí Sending UNLOCK command...")
sensor.unlockReg()
Thread.sleep(800)  // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ EEPROM
Log.d(TAG, "‚Üí Registers unlocked")
```

**–ó–∞—á–µ–º:** –†–µ–≥–∏—Å—Ç—Ä—ã –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–π –∑–∞–ø–∏—Å–∏. –ù—É–∂–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º.

### –®–∞–≥ 2.2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ RSW = ACC_ONLY

**–ö–æ–¥:**
```kotlin
// === –®–ê–ì 2: –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Return Content ===
// –†–µ–≥–∏—Å—Ç—Ä RSW (0x02): –ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å
// 
// ‚ö†Ô∏è –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–∞—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –í–°–Å (ACC+GYRO+ANGLE+MAG = 0x1E),
// —á—Ç–æ –∑–∞–±–∏–≤–∞–µ—Ç BLE –∫–∞–Ω–∞–ª –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –¥–æ 10 Hz!
//
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¢–û–õ–¨–ö–û —É—Å–∫–æ—Ä–µ–Ω–∏–µ (RSW_ACC = 0x02):
// FF AA 02 02 00
Log.d(TAG, "‚Üí Sending RSW=0x02 (ACC_ONLY) command: FF AA 02 02 00")
val rswCommand = byteArrayOf(
    0xFF.toByte(), 0xAA.toByte(), 
    0x02,  // RSW register
    0x02,  // RSW_ACC only (acceleration)
    0x00   // high byte
)
sensor.sendProtocolData(rswCommand, 500)  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ —Å waitTime
Thread.sleep(800)  // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ EEPROM
Log.d(TAG, "‚Üí ‚úì Set RSW to ACC ONLY (0x02) - –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º BLE –∫–∞–Ω–∞–ª!")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞: 25 –±–∞–π—Ç ‚Üí 6 –±–∞–π—Ç (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –≤ 4 —Ä–∞–∑–∞!)
- –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: 2 –∫–±–∏—Ç/—Å–µ–∫ ‚Üí 0.5 –∫–±–∏—Ç/—Å–µ–∫ (–ø—Ä–∏ 10 –ì—Ü)
- –ö–∞–Ω–∞–ª –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω –¥–ª—è –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç—ã

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ RRATE (Return Rate)

### –ß—Ç–æ —Ç–∞–∫–æ–µ RRATE?

**RRATE (Return Rate Register, 0x03)** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —á–∞—Å—Ç–æ—Ç—É –≤—ã–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö.

**–ó–Ω–∞—á–µ–Ω–∏—è:**
- `0x06` = 10 –ì—Ü (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚ùå
- `0x07` = 20 –ì—Ü
- `0x08` = 50 –ì—Ü ‚úÖ (–Ω–∞—à–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- `0x09` = 100 –ì—Ü
- `0x0A` = 200 –ì—Ü (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ BLE)

### –®–∞–≥ 3.1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ RRATE = 50 –ì—Ü

**–ö–æ–¥:**
```kotlin
// === –®–ê–ì 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Å—Ç–æ—Ç—ã 50 Hz ===
// –†–µ–≥–∏—Å—Ç—Ä RRATE (0x03):
// 0x06=10Hz, 0x07=20Hz, 0x08=50Hz, 0x09=100Hz, 0x0B=200Hz
// 
// –ò—Å–ø–æ–ª—å–∑—É–µ–º 50 Hz - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –¥–ª—è BLE
// FF AA 03 08 00
Log.d(TAG, "‚Üí Sending RRATE=0x08 (50Hz) command: FF AA 03 08 00")
val rrateCommand = byteArrayOf(
    0xFF.toByte(), 0xAA.toByte(), 
    0x03,  // RRATE register
    0x08,  // RRATE_50HZ
    0x00   // high byte
)
sensor.sendProtocolData(rrateCommand, 500)  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ —Å waitTime
Thread.sleep(800)  // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ EEPROM
Log.d(TAG, "‚Üí Set return rate to 50 Hz")

// –î—É–±–ª–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ SDK –º–µ—Ç–æ–¥ (–Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª)
Log.d(TAG, "‚Üí Also calling setReturnRate(0x08) via SDK method...")
sensor.setReturnRate(0x08) // 50Hz (byte)
Thread.sleep(800)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–µ–Ω—Å–æ—Ä —Ç–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö —Å —á–∞—Å—Ç–æ—Ç–æ–π 50 –ì—Ü
- –ù–æ BLE connection interval –≤—Å—ë –µ—â—ë ~100 –º—Å (–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ 10 –ì—Ü)

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ requestConnectionPriority(HIGH)

### –ü—Ä–æ–±–ª–µ–º–∞: BLE Connection Interval

**–ß—Ç–æ —Ç–∞–∫–æ–µ Connection Interval?**
- –≠—Ç–æ –≤—Ä–µ–º—è –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏ BLE
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: ~30-100 –º—Å (Android –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –¥–ª—è —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è)
- –ü—Ä–∏ 100 –º—Å: –º–∞–∫—Å–∏–º—É–º 10 –ì—Ü (–¥–∞–∂–µ –µ—Å–ª–∏ —Å–µ–Ω—Å–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ 50 –ì—Ü)

**–†–µ—à–µ–Ω–∏–µ:** `requestConnectionPriority(HIGH)`
- –£–º–µ–Ω—å—à–∞–µ—Ç connection interval –¥–æ ~7.5-15 –º—Å
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å BLE
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —á–∞—Å—Ç–æ—Ç–æ–π 40-50 –ì—Ü

### –®–∞–≥ 4.1: –ò–∑–º–µ–Ω–µ–Ω–∏–µ InukerBluetoothBLE.java

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤—ã–∑—ã–≤–∞–ª `mClient.connect(mac, callback)` –±–µ–∑ –æ–ø—Ü–∏–π.

**–§–∞–π–ª:** `libs/Sample Codes/wit-opensdk-android/wit-sdk/src/main/java/com/wit/witsdk/sensor/modular/connector/modular/bluetooth/InukerBluetoothBLE.java`

**–ë—ã–ª–æ:**
```java
public void connect(String mac) {
    // ...
    // Êî∂Âà∞ËìùÁâôÊï∞ÊçÆÊó∂
    mClient.connect(this.mac, (code, data) -> {
        // callback
    });
}
```

**–°—Ç–∞–ª–æ:**
```java
public void connect(String mac) {
    // ...
    
    // ‚ö° –ò—Å–ø–æ–ª—å–∑—É–µ–º BleConnectOptions –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    // bluetoothkit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–æ–≤–µ—Ç requestConnectionPriority(HIGH) –≤ BleConnectWorker
    BleConnectOptions.Builder builder = new BleConnectOptions.Builder();
    builder.setConnectRetry(1);
    builder.setConnectTimeout(10000);
    builder.setServiceDiscoverRetry(3);
    builder.setServiceDiscoverTimeout(10000);
    BleConnectOptions bleConnectOptions = builder.build();
    
    // Êî∂Âà∞ËìùÁâôÊï∞ÊçÆÊó∂
    mClient.connect(this.mac, bleConnectOptions, new BleConnectResponse() {
        @Override
        public void onResponse(int code, BleGattProfile data) {
            // callback
        }
    });
}
```

**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã:**
```java
import com.inuker.bluetooth.library.connect.options.BleConnectOptions;
import com.inuker.bluetooth.library.connect.response.BleConnectResponse;
import com.inuker.bluetooth.library.model.BleGattProfile;
```

### –®–∞–≥ 4.2: –ü—Ä–æ–≤–µ—Ä–∫–∞ BleConnectWorker.java

**–§–∞–π–ª:** `third_party/bluetoothkit/src/main/java/com/inuker/bluetooth/library/connect/BleConnectWorker.java`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏–ª–∏—Å—å, —á—Ç–æ `bluetoothkit` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `requestConnectionPriority(HIGH)`:

```java
if (status == BluetoothGatt.GATT_SUCCESS && newState == BluetoothProfile.STATE_CONNECTED) {
    setConnectStatus(Constants.STATUS_DEVICE_CONNECTED);
    
    // ‚ö° REQUEST HIGH PRIORITY CONNECTION FOR BETTER THROUGHPUT
    // This reduces the BLE connection interval from ~30-100ms to ~7.5-15ms
    // Enabling higher sample rates (potentially 40-50 Hz instead of 10 Hz)
    if (mBluetoothGatt != null && Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
        try {
            boolean prioritySet = mBluetoothGatt.requestConnectionPriority(BluetoothGatt.CONNECTION_PRIORITY_HIGH);
            BluetoothLog.v(String.format("‚ö° requestConnectionPriority(HIGH) = %s", prioritySet));
            android.util.Log.i("BleConnectWorker", "‚ö° requestConnectionPriority(HIGH) = " + prioritySet + " (SDK: " + Build.VERSION.SDK_INT + ")");
            if (!prioritySet) {
                android.util.Log.w("BleConnectWorker", "‚ö†Ô∏è requestConnectionPriority returned false - connection priority may not be set");
            }
        } catch (Exception e) {
            android.util.Log.e("BleConnectWorker", "‚ùå Failed to request connection priority", e);
        }
    } else {
        android.util.Log.w("BleConnectWorker", "‚ö†Ô∏è Cannot use requestConnectionPriority: SDK=" + Build.VERSION.SDK_INT + ", gatt=" + (mBluetoothGatt != null));
    }
    // ...
}
```

**–í–∞–∂–Ω–æ:** `bluetoothkit` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞–ª —ç—Ç–æ—Ç –∫–æ–¥, –Ω–æ –æ–Ω –≤—ã–∑—ã–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å `BleConnectOptions`!

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Connection interval —É–º–µ–Ω—å—à–∏–ª—Å—è —Å ~100 –º—Å –¥–æ ~15-20 –º—Å
- –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å BLE —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å
- –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —á–∞—Å—Ç–æ—Ç–æ–π 40-50 –ì—Ü

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–º–∞–Ω–¥—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥ —Ä–µ–≥–∏—Å—Ç—Ä—ã –Ω–µ –º–µ–Ω—è–ª–∏—Å—å
- RSW –æ—Å—Ç–∞–≤–∞–ª—Å—è = 0 (–≤–º–µ—Å—Ç–æ 2)
- RRATE –æ—Å—Ç–∞–≤–∞–ª—Å—è = 6 (–≤–º–µ—Å—Ç–æ 8)

**–ü—Ä–∏—á–∏–Ω–∞:** –°–µ–Ω—Å–æ—Ä—É –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ EEPROM.

### –®–∞–≥ 5.1: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫

**–ë—ã–ª–æ:**
```kotlin
sensor.unlockReg()
Thread.sleep(100)  // ‚ùå –°–ª–∏—à–∫–æ–º –º–∞–ª–æ

sensor.sendProtocolData(rswCommand)
Thread.sleep(100)  // ‚ùå –°–ª–∏—à–∫–æ–º –º–∞–ª–æ
```

**–°—Ç–∞–ª–æ:**
```kotlin
sensor.unlockReg()
Thread.sleep(800)  // ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ EEPROM

sensor.sendProtocolData(rswCommand, 500)  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ —Å waitTime
Thread.sleep(800)  // ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
```

### –®–∞–≥ 5.2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ —Å waitTime

**–ë—ã–ª–æ:**
```kotlin
sensor.sendProtocolData(byteArrayOf(...))  // –ë–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏
```

**–°—Ç–∞–ª–æ:**
```kotlin
sensor.sendProtocolData(byteArrayOf(...), 500)  // –° —è–≤–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π 500 –º—Å
```

**–ú–µ—Ç–æ–¥ `sendProtocolData(data, waitTime)`:**
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É
- –ñ–¥—ë—Ç `waitTime` –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–µ–Ω—Å–æ—Ä –æ–±—Ä–∞–±–æ—Ç–∞–ª –∫–æ–º–∞–Ω–¥—É

### –®–∞–≥ 5.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ–Ω—Å–æ—Ä–∞

**–ö–æ–¥:**
```kotlin
// ‚ö†Ô∏è –í–ê–ñ–ù–û: –ñ–¥—ë–º –ø–æ–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è
// –î–∞—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏—ë–º—É –∫–æ–º–∞–Ω–¥
var waitCount = 0
while (!sensor.isOpen() && waitCount < 20) {
    Thread.sleep(100)
    waitCount++
}
if (!sensor.isOpen()) {
    Log.w(TAG, "‚ö†Ô∏è Sensor not ready after ${waitCount * 100}ms, proceeding anyway...")
} else {
    Log.d(TAG, "‚úÖ Sensor is ready (waited ${waitCount * 100}ms)")
}

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
Thread.sleep(500)
```

**–ó–∞—á–µ–º:** –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Å–µ–Ω—Å–æ—Ä –≥–æ—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ–¥ –∏—Ö –æ—Ç–ø—Ä–∞–≤–∫–æ–π.

### –®–∞–≥ 5.4: –ß—Ç–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ö–æ–¥:**
```kotlin
// === –®–ê–ì 6: –ß–∏—Ç–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è) ===
// –ñ–¥—ë–º –µ—â—ë –Ω–µ–º–Ω–æ–≥–æ, —á—Ç–æ–±—ã –¥–∞—Ç—á–∏–∫ —É—Å–ø–µ–ª —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
Thread.sleep(500)

// –ß–∏—Ç–∞–µ–º RSW (0x02) - –∫–æ–º–∞–Ω–¥–∞ —á—Ç–µ–Ω–∏—è: FF AA 27 02 00
Log.d(TAG, "‚Üí Reading RSW register (0x02)...")
sensor.sendProtocolData(byteArrayOf(0xFF.toByte(), 0xAA.toByte(), 0x27, 0x02, 0x00))
Thread.sleep(500)  // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
val rswValue = sensor.getDeviceData("02")
Log.d(TAG, "  ‚Üí RSW read result: '$rswValue'")

// –ß–∏—Ç–∞–µ–º RRATE (0x03) - –∫–æ–º–∞–Ω–¥–∞ —á—Ç–µ–Ω–∏—è: FF AA 27 03 00
Log.d(TAG, "‚Üí Reading RRATE register (0x03)...")
sensor.sendProtocolData(byteArrayOf(0xFF.toByte(), 0xAA.toByte(), 0x27, 0x03, 0x00))
Thread.sleep(500)
val rrateValue = sensor.getDeviceData("03")
Log.d(TAG, "  ‚Üí RRATE read result: '$rrateValue'")

// –ß–∏—Ç–∞–µ–º ACCRANGE (0x21)
Log.d(TAG, "‚Üí Reading ACCRANGE register (0x21)...")
sensor.sendProtocolData(byteArrayOf(0xFF.toByte(), 0xAA.toByte(), 0x27, 0x21, 0x00))
Thread.sleep(500)
val accRangeValue = sensor.getDeviceData("21")
Log.d(TAG, "  ‚Üí ACCRANGE read result: '$accRangeValue'")

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
Log.i(TAG, "‚úì Sensor configuration complete:")
Log.i(TAG, "  üì§ RSW (return content): $rswValue (expect 2=ACC_ONLY)")
Log.i(TAG, "  ‚è±Ô∏è RRATE (frequency): $rrateValue (expect 8=50Hz)")
Log.i(TAG, "  üìè ACCRANGE: $accRangeValue (expect 0=¬±2g)")
```

**–ó–∞—á–µ–º:** –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **–ß–∞—Å—Ç–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö** | 10 –ì—Ü |
| **RSW (Return Content)** | 0x1E (–≤—Å—ë) |
| **–†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞** | ~25 –±–∞–π—Ç |
| **RRATE** | 0x06 (10 –ì—Ü) |
| **BLE Connection Interval** | ~100 –º—Å |
| **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** | 2 –∫–±–∏—Ç/—Å–µ–∫ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | AAR (–Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å) |

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **–ß–∞—Å—Ç–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö** | **50 –ì—Ü** ‚úÖ |
| **RSW (Return Content)** | 0x02 (ACC_ONLY) ‚úÖ |
| **–†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞** | ~6 –±–∞–π—Ç ‚úÖ |
| **RRATE** | 0x08 (50 –ì—Ü) ‚úÖ |
| **BLE Connection Interval** | ~15-20 –º—Å ‚úÖ |
| **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** | 2.4 –∫–±–∏—Ç/—Å–µ–∫ ‚úÖ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å) ‚úÖ |

### –£–ª—É—á—à–µ–Ω–∏—è:

- ‚úÖ **–ß–∞—Å—Ç–æ—Ç–∞ —É–≤–µ–ª–∏—á–µ–Ω–∞ –≤ 5 —Ä–∞–∑** (10 –ì—Ü ‚Üí 50 –ì—Ü)
- ‚úÖ **–†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ —É–º–µ–Ω—å—à–µ–Ω –≤ 4 —Ä–∞–∑–∞** (25 –±–∞–π—Ç ‚Üí 6 –±–∞–π—Ç)
- ‚úÖ **Connection interval —É–º–µ–Ω—å—à–µ–Ω –≤ 5-6 —Ä–∞–∑** (100 –º—Å ‚Üí 15-20 –º—Å)
- ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–µ–º–µ—Ü–∫–æ–º—É MicroSwing** (–æ–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ 50 –ì—Ü)

---

## üîß –ü–æ–ª–Ω—ã–π –∫–æ–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ–Ω—Å–æ—Ä–∞

**–§–∞–π–ª:** `app/src/main/java/com/accelerometer/app/bluetooth/BluetoothAccelerometerService.kt`

```kotlin
private fun configureSensor(sensor: Bwt901ble) {
    Thread {
        try {
            Log.i(TAG, "üîß Configuring sensor for 50 Hz (optimized for BLE)...")
            
            // ‚ö†Ô∏è –í–ê–ñ–ù–û: –ñ–¥—ë–º –ø–æ–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è
            var waitCount = 0
            while (!sensor.isOpen() && waitCount < 20) {
                Thread.sleep(100)
                waitCount++
            }
            if (!sensor.isOpen()) {
                Log.w(TAG, "‚ö†Ô∏è Sensor not ready after ${waitCount * 100}ms, proceeding anyway...")
            } else {
                Log.d(TAG, "‚úÖ Sensor is ready (waited ${waitCount * 100}ms)")
            }
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
            Thread.sleep(500)
            
            // === –®–ê–ì 1: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ ===
            Log.d(TAG, "‚Üí Sending UNLOCK command...")
            sensor.unlockReg()
            Thread.sleep(800)
            Log.d(TAG, "‚Üí Registers unlocked")
            
            // === –®–ê–ì 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ RSW = ACC_ONLY ===
            Log.d(TAG, "‚Üí Sending RSW=0x02 (ACC_ONLY) command: FF AA 02 02 00")
            val rswCommand = byteArrayOf(
                0xFF.toByte(), 0xAA.toByte(), 
                0x02,  // RSW register
                0x02,  // RSW_ACC only
                0x00
            )
            sensor.sendProtocolData(rswCommand, 500)
            Thread.sleep(800)
            Log.d(TAG, "‚Üí ‚úì Set RSW to ACC ONLY (0x02)")
            
            // === –®–ê–ì 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ RRATE = 50 –ì—Ü ===
            Log.d(TAG, "‚Üí Sending RRATE=0x08 (50Hz) command: FF AA 03 08 00")
            val rrateCommand = byteArrayOf(
                0xFF.toByte(), 0xAA.toByte(), 
                0x03,  // RRATE register
                0x08,  // 50 Hz
                0x00
            )
            sensor.sendProtocolData(rrateCommand, 500)
            Thread.sleep(800)
            Log.d(TAG, "‚Üí Set return rate to 50 Hz")
            
            // –î—É–±–ª–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ SDK –º–µ—Ç–æ–¥
            sensor.setReturnRate(0x08)
            Thread.sleep(800)
            
            // === –®–ê–ì 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ACCRANGE = ¬±2g ===
            Log.d(TAG, "‚Üí Sending ACCRANGE=0x00 (¬±2g) command: FF AA 21 00 00")
            val accRangeCommand = byteArrayOf(
                0xFF.toByte(), 0xAA.toByte(), 
                0x21,  // ACCRANGE register
                0x00,  // ¬±2g
                0x00
            )
            sensor.sendProtocolData(accRangeCommand, 500)
            Thread.sleep(800)
            Log.d(TAG, "‚Üí Set acceleration range to ¬±2g")
            
            // === –®–ê–ì 5: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ EEPROM ===
            Log.d(TAG, "‚Üí Sending SAVE command to write to EEPROM...")
            sensor.saveReg()
            Thread.sleep(1000)  // –ó–∞–ø–∏—Å—å –≤ EEPROM —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
            Log.d(TAG, "‚Üí Settings saved to EEPROM")
            
            // === –®–ê–ì 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ ===
            Thread.sleep(500)
            
            // –ß–∏—Ç–∞–µ–º RSW
            Log.d(TAG, "‚Üí Reading RSW register (0x02)...")
            sensor.sendProtocolData(byteArrayOf(0xFF.toByte(), 0xAA.toByte(), 0x27, 0x02, 0x00))
            Thread.sleep(500)
            val rswValue = sensor.getDeviceData("02")
            Log.d(TAG, "  ‚Üí RSW read result: '$rswValue'")
            
            // –ß–∏—Ç–∞–µ–º RRATE
            Log.d(TAG, "‚Üí Reading RRATE register (0x03)...")
            sensor.sendProtocolData(byteArrayOf(0xFF.toByte(), 0xAA.toByte(), 0x27, 0x03, 0x00))
            Thread.sleep(500)
            val rrateValue = sensor.getDeviceData("03")
            Log.d(TAG, "  ‚Üí RRATE read result: '$rrateValue'")
            
            // –ß–∏—Ç–∞–µ–º ACCRANGE
            Log.d(TAG, "‚Üí Reading ACCRANGE register (0x21)...")
            sensor.sendProtocolData(byteArrayOf(0xFF.toByte(), 0xAA.toByte(), 0x27, 0x21, 0x00))
            Thread.sleep(500)
            val accRangeValue = sensor.getDeviceData("21")
            Log.d(TAG, "  ‚Üí ACCRANGE read result: '$accRangeValue'")
            
            // –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            Log.i(TAG, "‚úì Sensor configuration complete:")
            Log.i(TAG, "  üì§ RSW (return content): $rswValue (expect 2=ACC_ONLY)")
            Log.i(TAG, "  ‚è±Ô∏è RRATE (frequency): $rrateValue (expect 8=50Hz)")
            Log.i(TAG, "  üìè ACCRANGE: $accRangeValue (expect 0=¬±2g)")
            Log.i(TAG, "  üéØ Expected result: ~50 samples/sec instead of 10!")
            
        } catch (ex: Exception) {
            Log.e(TAG, "‚ùå Failed to configure sensor", ex)
        }
    }.start()
}
```

---

## üîÑ –ü–æ–ª–Ω—ã–π –∫–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è InukerBluetoothBLE.java

**–§–∞–π–ª:** `libs/Sample Codes/wit-opensdk-android/wit-sdk/src/main/java/com/wit/witsdk/sensor/modular/connector/modular/bluetooth/InukerBluetoothBLE.java`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã:**
```java
import com.inuker.bluetooth.library.connect.options.BleConnectOptions;
import com.inuker.bluetooth.library.connect.response.BleConnectResponse;
import com.inuker.bluetooth.library.model.BleGattProfile;
```

2. **–ò–∑–º–µ–Ω—ë–Ω –º–µ—Ç–æ–¥ `connect()`:**
```java
public void connect(String mac) {
    this.mac = mac;
    Log.e("BluetoothBLE", "conectmac:" + connectStatus);
    if ((connectStatus == STATUS_CONNECTING) || (connectStatus == STATUS_CONNECTED)) return;
    connectStatus = STATUS_CONNECTING;

    // ‚ö° –ò—Å–ø–æ–ª—å–∑—É–µ–º BleConnectOptions –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    // bluetoothkit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–æ–≤–µ—Ç requestConnectionPriority(HIGH) –≤ BleConnectWorker
    BleConnectOptions.Builder builder = new BleConnectOptions.Builder();
    builder.setConnectRetry(1);
    builder.setConnectTimeout(10000);
    builder.setServiceDiscoverRetry(3);
    builder.setServiceDiscoverTimeout(10000);
    BleConnectOptions bleConnectOptions = builder.build();
    
    // Êî∂Âà∞ËìùÁâôÊï∞ÊçÆÊó∂
    mClient.connect(this.mac, bleConnectOptions, new BleConnectResponse() {
        @Override
        public void onResponse(int code, BleGattProfile data) {
            Log.e("BluetoothBLE", "conect:" + code);
            if (code == REQUEST_SUCCESS) {
                connectStatus = STATUS_CONNECTED;
                Log.e("BluetoothBLE", "ËøûÊé•ÊàêÂäü");
                Log.e("BluetoothBLE", "mac:" + mac.toString());
                Log.e("BluetoothBLE", "UUID_SERVICE:" + UUID_SERVICE.toString());
                Log.e("BluetoothBLE", "UUID_READ:" + UUID_READ.toString());
                Log.i("BluetoothBLE", "‚úÖ Connection established. bluetoothkit should call requestConnectionPriority(HIGH) automatically.");

                setNotify();
            }

            if (code == REQUEST_FAILED) {
                Log.e("BluetoothBLE", "ËøûÊé•Êñ≠ÂºÄ");
                connectStatus = STATUS_DISCONNECTED;
            }
        }
    });
}
```

---

## üìà –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –î–æ:
```
–°–µ–Ω—Å–æ—Ä (10 –ì—Ü, –≤—Å—ë –¥–∞–Ω–Ω—ã–µ)
    ‚Üì
BLE (Connection Interval: 100 –º—Å)
    ‚Üì
Android (10 –ì—Ü)
    ‚Üì
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (10 –ì—Ü) ‚ùå
```

### –ü–æ—Å–ª–µ:
```
–°–µ–Ω—Å–æ—Ä (50 –ì—Ü, —Ç–æ–ª—å–∫–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è)
    ‚Üì
BLE (Connection Interval: 15-20 –º—Å, HIGH priority)
    ‚Üì
Android (50 –ì—Ü)
    ‚Üì
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (50 –ì—Ü) ‚úÖ
```

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **RSW = ACC_ONLY** ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è BLE –∫–∞–Ω–∞–ª–∞
2. **RRATE = 50 –ì—Ü** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Å—Ç–æ—Ç—ã —Å–µ–Ω—Å–æ—Ä–∞
3. **requestConnectionPriority(HIGH)** ‚Äî —É–º–µ–Ω—å—à–∞–µ—Ç connection interval
4. **–ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏** ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –∑–∞–ø–∏—Å—å –≤ EEPROM
5. **–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤–º–µ—Å—Ç–æ AAR** ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
üìä Sample rate: 50 samples/sec (total: 171155)
üì¶ RAW:(90.0,305.0,104.0) SDK:(0,0440g,0,1490g,0,0510g)
‚úì Sensor configuration complete:
  üì§ RSW (return content): 2 (expect 2=ACC_ONLY) ‚úÖ
  ‚è±Ô∏è RRATE (frequency): 8 (expect 8=50Hz) ‚úÖ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **50 –ì—Ü —Å—Ç–∞–±–∏–ª—å–Ω–æ!**

---

## üìù –ò—Ç–æ–≥

–ú—ã –ø–æ–ª—É—á–∏–ª–∏ **50 –ì—Ü** —á–µ—Ä–µ–∑:
1. ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ SDK
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫—É RSW = ACC_ONLY (—É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–∞–∫–µ—Ç–∞)
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫—É RRATE = 50 –ì—Ü (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã)
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ requestConnectionPriority(HIGH) (—É–º–µ–Ω—å—à–µ–Ω–∏–µ connection interval)
5. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∑–∞–¥–µ—Ä–∂–µ–∫ (–≥–∞—Ä–∞–Ω—Ç–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥)

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –∫–æ–¥–µ –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
