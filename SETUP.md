# Инструкция по настройке проекта

## Что уже готово

✅ Полная структура Android-проекта на Kotlin  
✅ Bluetooth-сервис для подключения к акселерометру  
✅ Расчет стабильности (Stability) по формуле MicroSwing® 6  
✅ Расчет частоты колебаний (Oscillation frequency)  
✅ UI с диаграммами для отображения данных по осям X и Y  
✅ Локальное управление пользователями через Room Database  

## Что нужно настроить

### 1. Фильтр устройств

SDK ищет устройства по имени. Список фильтров находится в `BluetoothAccelerometerService.DEVICE_NAME_FILTER`.
Если ваш WT9011DCL вещает под другим именем, измените значения в этом списке или реализуйте собственный UI для выбора нужного датчика.

### 2. Единицы измерения и формулы

SDK возвращает ускорение/углы уже нормализованными в `g`. В сервисе `BluetoothAccelerometerService.parseAcceleration()` оно переводится в м/с². 
Если нужны мм/с² или другие единицы, скорректируйте множители или используйте формулы из раздела 8.3.2 руководства:

```
мм/с² = (raw/16384) * 9.80665 * 1000
см/с² = (raw/16384) * 9.80665 * 100
м/с²  = (raw/16384) * 9.80665
```

### 3. Параметры сканирования

Сервис `BluetoothAccelerometerService` использует SDK WitMotion и автоматически ищет устройства с именами `WT`, `BWT`, `WT901`. Если в вашем проекте другое имя, измените список `DEVICE_NAME_FILTER` внутри сервиса или добавьте UI для выбора конкретного датчика.

### 4. Обновления SDK

В каталоге `libs/Android SDK` лежат оригинальные архивы производителя. Для BLE 5.0 используется open SDK (`libs/Sample Codes/wit-opensdk-android/wit-sdk`). Он уже подключён как модуль `:wit-sdk`. При обновлении SDK:

- замените содержимое папки `wit-sdk` на новую версию;
- проверьте зависимости в `libs/Sample Codes/wit-opensdk-android/wit-sdk/build.gradle`;
- убедитесь, что кастомные обёртки (`app/src/main/java/com/accelerometer/app/sdk/witmotion`) совместимы.

## Запуск проекта

### Вариант 1: Android Studio (рекомендуется для отладки)
1. Откройте проект в Android Studio
2. Дождитесь синхронизации Gradle
3. Подключите Android устройство или запустите эмулятор с поддержкой Bluetooth
4. Нажмите Run или Debug

### Вариант 2: Из командной строки (можно из Cursor)
```bash
# Сборка и установка
./gradlew installDebug

# Или используйте скрипт (Linux/Mac)
./scripts/build-and-install.sh

# Или для Windows
scripts\build-and-install.bat
```

**Примечание:** Для полноценной отладки с breakpoints используйте Android Studio. Cursor отлично подходит для написания кода, но для отладки лучше использовать Android Studio или командную строку с логами.

## Разрешения

Приложение запросит необходимые разрешения при первом запуске:
- Bluetooth
- Bluetooth Connect (Android 12+)
- Bluetooth Scan (Android 12+)
- Location (требуется для Bluetooth на некоторых версиях Android)

## Тестирование

Для тестирования без реального устройства можно:
1. Использовать эмулятор с поддержкой Bluetooth (ограниченно)
2. Добавить генератор тестовых данных в `BluetoothAccelerometerService`
3. Использовать реальное устройство с акселерометром

## Дополнительные улучшения (опционально)

- Сохранение истории измерений в базу данных
- Экспорт данных в CSV/JSON
- Настройка времени измерения (сейчас оптимально 10 секунд)
- Фильтрация данных для более точных расчетов
- Настройка корректирующего коэффициента для частоты колебаний

